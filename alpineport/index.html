<!DOCTYPE html>
<html lang="en">

<head>
    <title>ACE in Action</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/ace/ace.js"></script>
    <script src="/ace/ext-language_tools.js"></script>
    <script src="/ace/ext-statusbar.js"></script>
    <script type="module" src="/src/index.js"></script>

</head>

<body x-data="AceApp()" class="h-full flex flex-col">
    <div class="grow w-full relative h-screen">
        <div id="editor-wrapper" :class="$store.bottomBar.move && 'h-[70vh]'" x-effect="resizeEditor();" class="h-[96vh]">
            <div id="editor" class="h-full w-full">
                { var x = "All this is syntax
                highlighted"; return x;
                }
            </div>
        </div>
        <div id="floating-buttons" class="top-3 flex flex-col absolute rounded-xl right-3 z-10">
            <button @click="openSettingsMenu()" class="side-button group">
                <svg class="group-hover:animate-spin">
                    <use href="/src/assets/sprite.svg#icon-settings"></use>
                </svg>
            </button>
            <button  @click="$store.bottomBar.move = !$store.bottomBar.move" class="side-button group">
                <svg class="group-hover:animate-pulse">
                    <use href="/src/assets/sprite.svg#terminal"></use>
                </svg>
            </button>
            <button class="side-button group">
                <svg class="group-hover:animate-pulse">
                    <use href="/src/assets/sprite.svg#icon-save"></use>
                </svg>
            </button>
            <div class=" flex flex-col relative" x-data="{ open: false }" x-on:keydown.esc.prevent.stop="open = false"
                x-on:click="open = !open">
                <button @click="{ open: true }" class="side-button group">
                    <svg class="h-6 w-6 text-current group-hover:animate-pulse">
                        <use href="/src/assets/sprite.svg#icon-load"></use>
                    </svg>
                </button>
                <div id="dropdown-container" class="flex flex-col" x-cloak x-show="open"
                    x-transition:enter="transition ease-out duration-100"
                    x-transition:enter-start="opacity-0 -translate-y-3"
                    x-transition:enter-end="opacity-100 translate-y-0"
                    x-transition:leave="transition ease-in duration-75"
                    x-transition:leave-start="opacity-100 translate-y-0"
                    x-transition:leave-end="opacity-0 translate-y-10" x-on:click.outside="open = false" role="menu"
                    aria-labelledby="pm-dropdown">
                    <button class="side-button mt-2 group">
                        <svg class="h-6 w-6 text-current group-hover:animate-pulse">
                            <use href="/src/assets/sprite.svg#icon-computer"></use>
                        </svg>
                    </button>
                    <button class="side-button mt-2 group">
                        <svg class="h-6 w-6 text-current group-hover:animate-pulse">
                            <use href="/src/assets/sprite.svg#icon-server"></use>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="bottom-bar" :class="$store.bottomBar.move && 'h-[30vh]'"
            class="absolute bottom-0 left-0 right-0 flex flex-col z-10">
            <div id="bottom-row" class="flex flex-row h-8">
                <div id="status-bar" x-data="{ message: 'No file loaded' }" class="bg-[#303030]  px-2">
                    <span class="text-white" x-text="message"></span>
                </div>
                <div id="language-status" x-data="{  }"
                    class="bg-[#303030] grow flex items-center justify-end select-none px-2">
                    <div x-data="AceStatusBar()" x-init="init()" class="flex flex-row">
                        <span id="status-bar-ace" class="flex-row h-full self-center"></span>
                        <span id="language-icon" class="text-white px-1 h-full "><img
                                class="object-contain max-w-full max-h-7 w-auto h-auto"
                                :src="generateIcon(languageSelected, languageSelected)"></span>
                        <span class="text-white px-1" x-text="languageSelected"></span>
                    </div>
                </div>
            </div>
            <template x-if="$store.bottomBar.move">
                <div x-ref="terminal" x-data="terminal" x-init="init()" class="grow h-full overflow-hidden">
                </div>
            </template>
        </div>
        <template x-if="menuCloseButton">
            <div x-ref="clsBtn" class="ace_optionsMenuEntry justify-center!" @click="closeSettingsMenu()">Close
                Menu
            </div>
        </template>
    </div>
</body>

</html>